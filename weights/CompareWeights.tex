\documentclass[11pt,letterpaper,english]{article}

\input{commands}


\begin{document}
\section{Expression of the estimate}

Loss function: $f(x) = \dfrac{\epsilon}{2} (x-1)^2$

Oracle: $g_t = \epsilon (x_t-1) + C_1 \delta^2 + \xi_t$

Algorithm 1: $ x_{t+1} = x_t - \eta  g_t$

Algorithm 2: $\bar{g}_t = \dfrac{1}{K+1}  (g_t + g_{t-1} + ... + g_{t-K})$, 
$x_{t+1} = x_t - \eta  \bar{g}_t$

Choose $\epsilon = T^{-\frac{1}{3}}$, $\eta = T^{-\frac{5}{8}}$, $K = T^{\frac{1}{8}}$, $\delta=T^{-\frac{3}{16}}$.

For Algorithm 1:
\begin{align*}
x_{t+1} =& (1-\eta \epsilon) x_{t} + \eta \epsilon - \eta C_1 \delta^2-\eta \xi_{t}\\
=&  \left(1-\eta \epsilon\right)^t x_1+ \eta \epsilon+\eta \epsilon\left(1-\eta \epsilon\right)+\cdots + \eta \epsilon\left(1-\eta \epsilon\right)^{t-1}\\
&-C_1 \delta^2\left( \eta + \eta\left( 1-\eta \epsilon \right)+\cdots + \eta \left(1-\eta \epsilon\right)^{t-1} \right) \\
&-\eta \xi_t -\eta \left(1-\eta \epsilon\right)\xi_{t-1}- \cdots -\eta \left(1-\eta \epsilon\right)^{t-1}\xi_{1}\\
=& \left(1-\eta \epsilon\right)^t x_1+ 1-\left(1-\eta \epsilon \right)^t
-C_1 \delta^2 \dfrac{1}{\epsilon}\left( 1-\left(1-\eta \epsilon \right)^t \right)\\
&- \eta \xi_t -\eta \left(1-\eta \epsilon\right)\xi_{t-1}- \cdots -\eta \left(1-\eta \epsilon\right)^{t-1}\xi_{1}
\end{align*}

Denote the coefficients of $\left\lbrace\xi_t\right\rbrace$ in $x_{t+1}$ as $a^{(t)}, a^{(t-1)},\cdots,a^{(1)}$. We can see that the coefficients of $x_1$ in $x_{t+1}$ is $1+\epsilon (a^{(t)}+ a^{(t-1)}+\cdots + a^{(1)})$. So only the coefficients of $\left\lbrace\xi_t\right\rbrace$ will matter.

For Algorithm 2, $\eta$ should be replaced by $\eta \frac{1}{K+1}$. Moreover, the polynomial is not as regular as, but close to, some power of $\left(1-\eta \frac{1}{K+1} \epsilon\right)$.

For example, when $K=2$:
\begin{align*}
x_2: &-\eta \frac{1}{K+1} \xi_1 \\
x_3: &-\eta \frac{1}{K+1} \left[ \xi_2 + \left( 2- \eta \frac{1}{K+1}\epsilon\right)\xi_1\right]\\
x_4: &-\eta \frac{1}{K+1} \left[ \xi_3 + \left( 2- \eta \frac{1}{K+1}\epsilon\right)\xi_2+ \left( 3- 4\eta \frac{1}{K+1}\epsilon+\eta^2 \frac{1}{(K+1)^2}\epsilon^2\right)\xi_1\right]\\
x_5: &-\eta \frac{1}{K+1} [ \xi_4 + \left( 2- \eta \frac{1}{K+1}\epsilon\right)\xi_3+\left( 3- 4\eta \frac{1}{K+1}\epsilon+\eta^2 \frac{1}{(K+1)^2}\epsilon^2\right)\xi_2  \\
&+ \left( 2- 10\eta \frac{1}{K+1}\epsilon+6\eta^2 \frac{1}{(K+1)^2}\epsilon^2-\eta^3 \frac{1}{(K+1)^3}\epsilon^3\right)\xi_1]
\end{align*}

Compared with the case of Algorithm 1:
\begin{align*}
x_2: &-\eta  \xi_1 \\
x_3: &-\eta  \left[ \xi_2 + \left( 1- \eta \epsilon\right)\xi_1\right]\\
x_4: &-\eta  \left[ \xi_3 + \left( 1- \eta \epsilon\right)\xi_2+ \left( 1- 2\eta \epsilon+\eta^2 \epsilon^2\right)\xi_1\right]\\
x_5: &-\eta  \left[ \xi_4 + \left( 1- \eta \epsilon\right)\xi_3+ \left( 1- 2\eta \epsilon+\eta^2 \epsilon^2\right)\xi_2+ \left( 1- 3\eta \epsilon+3\eta^2 \epsilon^2-\eta^3 \epsilon^3\right)\xi_1\right]
\end{align*}

\section{Compute regret from the expression}
Under both of the algorithms, the estimate can be written as
\begin{align*}
x_{T+1} = w_0 x_1 + 1-w_0 -C_1 \delta^2 \frac{1}{\epsilon}(1-w_0) -w_1 \xi_1 - w_2 \xi_2 - \cdots - w_T \xi_T
\end{align*}
It should hold that 
\[w_0 = 1-\epsilon (w_1+\cdots+w_T).\]
%We should also have 
%\[w_0 \to 0 \text{ as } T \to +\infty.\]
%For Algorithm 1, $w_0 =  \left(1-\eta \epsilon\right)^T = (1-T^{-\frac{23}{24}})^T = (\frac{1}{e})^{T^{1/24}} \to 0$.
Since $\{\xi_t\}$ is independent, $\EE{\xi_t}=0$, $\EE{\xi_t^2}=\dfrac{C_2}{\delta^2}$, 
the regret is
\begin{align*}
\EE{R} =&\EE{ \frac{\epsilon}{2} (x_{T+1}-1)^2}\\
=& \EE{\frac{\epsilon}{2} \left(w_0 x_1 -w_0 -C_1 \delta^2 \frac{1}{\epsilon}(1-w_0) -w_1 \xi_1 - w_2 \xi_2 - \cdots - w_T \xi_T  \right)^2} \\
=& \dfrac{\epsilon}{2} \left( (x_1-1)-(\epsilon x_1 -\epsilon +C_1\delta^2)(w_1+\cdots+w_T) \right)^2 + \dfrac{\epsilon}{2} \dfrac{C_2}{\delta^2} \left(w_1^2+\cdots+w_T^2  \right) \\
\geq& \dfrac{\epsilon}{2} \left( (x_1-1)-(\epsilon x_1 -\epsilon +C_1\delta^2)(w_1+\cdots+w_T) \right)^2 + \dfrac{\epsilon}{2} \dfrac{C_2}{\delta^2}\dfrac{1}{T} \left(w_1+\cdots+w_T  \right)^2
\end{align*}
Denote $W = w_1+\cdots+w_T$, then 
\begin{align*}
\EE{R} \geq  \dfrac{\epsilon}{2} \left( (x_1-1)^2-2(x_1-1)(\epsilon x_1-\epsilon +C_1 \delta^2)W + (\epsilon x_1-\epsilon +C_1 \delta^2+C_2 \delta^{-2}T^{-1})^2W^2  \right) \,.
\end{align*}
The lower bound is minimized when $W=\dfrac{(x_1-1)(\epsilon x_1-\epsilon +C_1 \delta^2)}{\left(\epsilon x_1-\epsilon +C_1 \delta^2+C_2 \delta^{-2}T^{-1}\right)^2} $. Therefore, 
\begin{align*}
\EE{R} = O(\dfrac{\epsilon}{2}) = O(T^{-\frac{1}{3}})\,.
\end{align*}

Specially, for Algorithm 1, 
\begin{align*}
w_1+\cdots+w_T&= \eta \left( 1+(1-\eta \epsilon)+\cdots+(1-\eta \epsilon)^{T-1} \right)\to \dfrac{1}{\epsilon} =T^{\frac{1}{3}}\,,\\
w_1^2+\cdots+w_T^2&=\eta^2 \left( 1+(1-\eta \epsilon)^2+\cdots+(1-\eta \epsilon)^{2(T-1)} \right) \to \dfrac{\eta^2}{1-(1-\eta \epsilon)^2}= T^{-\frac{7}{24}}\,.
\end{align*}
Therefore, $\EE{R} = O(T^{-\frac{5}{12}})+O(T^{-\frac{1}{4}})>O(T^{-\frac{1}{3}})$.





\end{document}

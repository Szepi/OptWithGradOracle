%!TEX root =  bgo.tex
% please do not delete or change the first line (needed by Csaba's editor)
\subsection{Proofs for Upper Bounds}
\label{sec:ub-proof}

Before giving the proof, we introduce a useful lemma, which is essentially Theorem~C.4 of \cite{MahdaviPhd:2014}.
\begin{lemma}
\label{lem:ub}
Let $(\cF_t)_{t}$ be a filtration such that $X_t$ is $\cF_t$-measurable.
Let $\overline G_t = \EE{G_t|\cF_t}$ 
and assume that the nonnegative real-valued deterministic sequence $(\beta_t)_{1\le t\le n}$ is such that 
$\norm{\overline G_t - \nabla f(X_t)}_* \le \beta_t$ holds almost surely. 
Further, assume that $D=\sup_{x,y\in \cK} D_{\mathcal{R}}(x,y)$ and let $\eta_t = \frac{\alpha}{a_t+L}$ for some increasing 
sequence $(a_t)_{t=1}^{n-1}$ of numbers. Then, 
\begin{align*}
\MoveEqLeft \EE{ \sum_{t=1}^n f(X_t) - f(x) }  \\
\le& 	 \EE{f(X_1)-f(x)}+ \\
 & \sqrt{\tfrac{2D}{\alpha}} \sum_{t=1}^{n-1} \beta_t 
 +\frac{D(a_{n-1}+L)}{\alpha} +
	  \sum_{t=1}^{n-1}\frac{\sigma_t^2}{2a_t}\,,
\end{align*}
where $\sigma_t^2 = \EE{ \norm{G_t-\overline G_t}_*^2}$ is the ``variance'' of $G_t$.
\end{lemma}
This is also identical to Theorem~6.3 of \cite{Bu:Convex14}, who cites \cite{Dekel:minibatch12} as the source. These results assume that $\beta_t=0$ above.
The proof of this lemma can be found in \cref{sec:appendix}.

Proof of Theorem \ref{thm:ub}:

Since $f$ is convex, by Jensen's inequality,
\[
 \E[f(\hat X_n) - \inf_{x \in \cK} f(x)] \le  \dfrac{1}{n}\EE{ \sum_{t=1}^n f(X_t) - \inf_{x \in \cK}f(x) } \,.
\]
Then the result immediately follows from Lemma \ref{lem:ub}, by replacing
 $\beta_t = C_1\delta^p$, $\sigma^2_t = C_2 \delta^{-q}$ and $a_t$, respectively.